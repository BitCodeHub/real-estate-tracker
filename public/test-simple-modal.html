<!DOCTYPE html>
<html>
<head>
    <title>Simple Modal Test</title>
    <style>
        body { background: #1a1a1a; color: white; font-family: Arial; padding: 20px; }
        button { background: #3b82f6; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal-content { background: #242424; margin: 50px auto; padding: 20px; width: 80%; max-width: 500px; border-radius: 8px; }
    </style>
</head>
<body>
    <h1>Simple Modal Test</h1>
    
    <button onclick="testDirectModal()">Test Direct Modal</button>
    <button onclick="testWindowModal()">Test window.openModal</button>
    <button onclick="checkFunctions()">Check Functions</button>
    
    <div id="testModal" class="modal">
        <div class="modal-content">
            <h2>Test Modal</h2>
            <p>This is a test modal</p>
            <button onclick="closeTestModal()">Close</button>
        </div>
    </div>
    
    <div id="results"></div>
    
    <script>
        // Define functions directly
        function testDirectModal() {
            document.getElementById('testModal').style.display = 'block';
            log('Direct modal open');
        }
        
        function closeTestModal() {
            document.getElementById('testModal').style.display = 'none';
            log('Direct modal closed');
        }
        
        function testWindowModal() {
            if (typeof window.openModal === 'function') {
                log('window.openModal exists');
                window.openModal('testModal');
            } else {
                log('window.openModal does NOT exist');
            }
        }
        
        function checkFunctions() {
            const funcs = ['openModal', 'closeModal', 'openAddPropertyModal', 'openAnalyzeModal', 'generateMarketInsights'];
            funcs.forEach(f => {
                log(`${f}: ${typeof window[f] === 'function' ? 'EXISTS' : 'MISSING'}`);
            });
        }
        
        function log(msg) {
            const results = document.getElementById('results');
            results.innerHTML += `<div>${new Date().toLocaleTimeString()}: ${msg}</div>`;
        }
        
        // Define openModal function
        window.openModal = function(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                log(`openModal called for: ${modalId}`);
            } else {
                log(`Modal not found: ${modalId}`);
            }
        };
        
        // Check on load
        window.onload = function() {
            log('Page loaded');
            checkFunctions();
        };
    </script>
</body>
</html>